<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>个人信息修改——夺宝奇兵</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="">
	<meta name="Copyright" content="">
	<meta name="Keywords" content="">
	<meta name="Description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<!-- style base -->
	<link rel="stylesheet" href="css/base.css">
	<!-- style common -->
	<link rel="stylesheet" href="css/common.css">
	<!-- layer skin extend style -->
	<link rel="stylesheet" href="css/layer_skin_extend.css">
	<!-- mobiscroll style -->
	<link rel="stylesheet" href="css/mobiscroll/mobiscroll.min.css">
	<!-- style layout -->
	<link rel="stylesheet" href="css/layout.css">
</head>
<body>
	<div class="viewport v-modify-info">
		<form action="" class="form-modify-info">
			<div class="modify-item modify-item-avatar clearfix">
				<label>上传头像</label>
				<div class="file-box" style="margin-top: 0;">
					<a href="javascript:;" class="btn-pic-add"><img src="images/user_avatar_1.jpg" width="64" height="64" alt=""></a>
					<input type="file" name="upload-pic" id="upload-pic">
				</div>
			</div>
			<div class="modify-item clearfix">
				<label for="nickname">昵称</label>
				<input type="text" name="nickname" id="nickname" value="狸猫不是猫">
			</div>
			<div class="modify-item">
				<p class="clearfix">
					<label for="sex">性别</label>
					<!-- <input type="text" name="sex" id="sex" value="女"> -->					
					<select name="sex" id="sex">
						<option disabled></option>
						<option value="1" selected>男</option>
						<option value="2">女</option>
					</select>
				</p>
				<p class="clearfix">
					<label for="birthDate">出生日期</label>
					<input type="text" name="birthDate" id="birthDate" value="1988-01-05">
				</p>
				<div class="modify-addr-area clearfix" id="itemAddrEditArea"  data-area-edit="广东 深圳市 南山区">
					<label for="area">地区</label>
					<!-- <input type="text" name="area" id="area" value="广东省深圳市南山区"> -->									
					<ul id="addrArea" style="display: none;"></ul>
					<input type="hidden" name="addrArea" id="addrAreaClone" />
				</div>
			</div>
			<div class="modify-item">
				<label>个人介绍</label>
				<textarea name="" id="" placeholder="介绍一下自己吧......"></textarea>
			</div>	
			<div class="modify-item item-account item-account-notset">
				<p class="phone-bind clearfix">
					<label>手机号</label>
					<span>绑定手机号，中奖早知道，收货快人一步</span>
					<a href="#">未绑定</a>
				</p>
				<p class="pwd-set clearfix">
					<label>登录密码</label>
					<a href="#">未设置</a>
				</p>
			</div>	
			<div class="modify-item item-account item-account-set">
				<p class="phone-bind clearfix">
					<label>手机号</label>
					<span>136****5599</span>
					<a href="#"><i class="icon-set-ok"></i>已绑定</a>
				</p>
			</div>	
			<div class="modify-item item-account item-account-set item-line1">
				<p class="pwd-set clearfix">
					<label>登录密码</label>
					<a href="#"><i class="icon-set-ok"></i>已设定</a>
				</p>				
			</div>
			<a href="#" class="btn btn-block btn-error btn-confirm-modify" id="btnConfirmModify"><span>确认</span></a>	
		</form>
	</div>
	<div class="fixed-nav clearfix">
		<a href="home.html"><i class="icon-nav icon-home"></i>首页</a>
		<a href="share.html"><i class="icon-nav icon-camera"></i>晒单</a>
		<a href="#"><i class="icon-nav icon-acti"></i>活动</a>
		<a href="cart.html" class="nav-cart"><span class="icon-nav icon-cart"><em class="cart-num" id="cartNum">1</em></span><!-- <i class="icon-nav icon-cart"></i> -->清单</a>
		<a href="personal_center.html"><i class="icon-nav icon-avatar"></i>个人中心</a>
	</div>
	<!-- jquery lib script -->
	<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
	<!-- common script -->
	<script type="text/javascript" src="js/lib.js"></script>
	<!-- jquery layer script -->
	<script type="text/javascript" src="js/layer/layer.js"></script>
	<!-- mobiscroll script -->
	<!-- <script type="text/javascript" src="js/mobiscroll/mobiscroll.core.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.frame.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.scroller.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.select.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.listbase.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.treelist.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.util.datetime.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.datetimebase.js"></script>
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.datetime.js"></script> -->
	<script type="text/javascript" src="js/mobiscroll/mobiscroll.min.js"></script>	
	<script type="text/javascript" src="js/mobiscroll/i18n/mobiscroll.i18n.zh.js"></script>	
	<!-- regiondata script -->
	<script src="js/regiondata.js" type="text/javascript"></script>
	<script>
	$(function(){
	
		var tmpHtml = '';
		for (var key in window._regionMap) {
			tmpHtml += '<li data-val="'+ window._regionMap[key][0] +'">'+ window._regionMap[key][0];
				tmpHtml += '<ul>';
					var objCity = window._regionMap[key][2];
					for (var key1 in objCity) {
						tmpHtml += '<li cityId="'+ key1 +'" data-val="'+ objCity[key1][0] +'">'+ objCity[key1][0];
							tmpHtml += '<ul>';
								var objArea = objCity[key1][2];
								for (var key2 in  objArea) {
									tmpHtml += '<li areaId="'+ key2 +'" data-val="'+ objArea[key2] +'">'+ objArea[key2] +'</li>';
								}
							tmpHtml += '</ul>';
						tmpHtml += '</li>';
					}
				tmpHtml += '</ul>';
			tmpHtml += '</li>';
		}
		$('#addrArea').append(tmpHtml);

		var areaEdit = $('#itemAddrEditArea').attr('data-area-edit');
		var province = areaEdit.split(' ')[0],
			city = areaEdit.split(' ')[1],
			district = areaEdit.split(' ')[2];
		$('#addrArea').mobiscroll().treelist({
			theme: 'mobiscroll',
			lang: 'zh',
			display: 'bottom',
			fixedWidth: [100, 100, 100],
			labels: ['province', 'city', 'district'],
			setText: '完成',
			defaultValue: [province, city, district],
			onSelect:  function (valueText, inst) {
				$('#addrAreaClone').val(valueText);
			},
			onMarkupReady: function(markup){
				$('.dwbc', markup).insertBefore($('.dwcc', markup));
			}
		});
		$('#addrArea_dummy').val(province + ' ' + city + ' ' + district);
		// 出生日期
		$('#birthDate').mobiscroll().date({
			theme: 'mobiscroll',
			lang: 'zh',
			display: 'bottom',
			setText: '完成',
			dateFormat: 'yy-mm-dd',
			onMarkupReady: function(markup){
				$('.dwbc', markup).insertBefore($('.dwcc', markup));
			}
		});
		// 性别
		$('#sex').mobiscroll().select({
			theme: 'mobiscroll',
			lang: 'zh',
			display: 'bottom',
			label: 'sex',
			group: {
				groupWheel: true,
				header: false,
				clustered: true
			},
			setText: '完成',
			onMarkupReady: function(markup){
				$('.dwbc', markup).insertBefore($('.dwcc', markup));
			}
		});

		// 确认修改
		$('#btnConfirmModify').on('click', function(){
			var nickName = $('#nickname'),
				     sex = $('#sex_dummy'),
			   birthDate = $('#birthDate'),
			        area = $('#addrArea_dummy');
			if (isEmpty('#nickname')) {
				layer.msg('请输入您的昵称');
			} else if (isEmpty('#sex_dummy')) {
				layer.msg('请选择您的性别');
			} else if (isEmpty('#birthDate')) {
				layer.msg('请选择您的出生日期');
			} else if (isEmpty('#addrArea_dummy')) {
				layer.msg('请选择您所在地区');
			} else {
				// @后台: 验证通过 提交表单
				layer.msg('个人信息修改成功');
			}
		})

	})
	</script>
</body>
</html>